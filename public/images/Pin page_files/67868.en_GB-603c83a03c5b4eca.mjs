"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[67868],{622978:(e,t,r)=>{r.d(t,{Z:()=>A});var n=r(667294),o=r(497617),i=r(5859);let l=()=>{let{inviteCode:e}=(0,i.B)(),t=(0,o.Z)();return(0,n.useCallback)((r,n)=>t(r,{inviteCode:e,loggingOptions:n}),[e,t])};var s=r(516562),a=r(633005),_=r(974371),u=r(545007),c=r(149722);let d=()=>{let e=(0,c.Z)(),t=(0,u.v9)(({loggedOutUserInfo:e})=>e?.userInfo);return e.isAuth&&e.isLimitedLogin?{type:"LIMITED_LOGIN",info:{connectedToFacebook:!!((e.socialNetwork||{}).facebook||{}).connected,connectedToGoogle:!!((e.socialNetwork||{}).gplus||{}).connected,email:e.email,firstName:e.firstName,hasPassword:!!e.hasPassword,imageUrl:e.imageMediumUrl,gplusUrl:((e.socialNetwork||{}).gplus||{}).url}}:{type:e.isAuth?"AUTH":"UNAUTH",info:t&&t.email&&t.first_name?{connectedToFacebook:!!t.connected_to_facebook,connectedToGoogle:!!t.connected_to_google,email:t.email,firstName:t.first_name,hasPassword:!!t.has_password,imageUrl:t.medium_image_url??null}:null}};var g=r(166770);let m=()=>{let[e,t]=(0,n.useState)("");return{route:e,setRoute:t}};var h=r(587703),p=r(140017),E=r(554786),f=r(735728),v=r(441640);let w=()=>{let e=(0,p.ZP)(),t=(0,E.HG)(),r=(0,h.Z)(),o=t?(0,f.hr)(e):(0,f.Wh)(e),[i,l]=(0,n.useState)(o);return(0,v.cZ)(e=>l(e??o)),(0,v.NN)(r),{text:i,setText:l}},T=()=>{let[e,t]=(0,n.useState)(!1),r=(0,h.Z)();return(0,v.UE)(()=>t(!0)),(0,v.NN)(r),{visible:e,setVisible:t}};var b=r(785893);function y({children:e}){let t=function(){let e=T();return{loginForMore:e,limitedLoginModalSubheader:w(),limitedLoginModalNextLocation:m(),viewer:d()}}();return(0,b.jsx)(g.o,{value:t,children:e})}let A=({children:e})=>{let t=(0,i.B)(),r=d(),o=l(),u=(0,n.useMemo)(()=>({getDeviceAppTypeString:()=>(0,a.Z)(t),register:o,viewer:r}),[t,r,o]);return(0,b.jsx)(y,{children:(0,b.jsx)(s.I7,{value:u,children:(0,b.jsx)(_.Z,{children:e})})})}},542674:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(340523);function o(){return(0,n.F)().checkExperiment("web_suspense_resource_settings_page").anyEnabled}},624965:(e,t,r)=>{r.d(t,{Z:()=>W});var n=r(667294),o=r(545007),i=r(542674),l=r(214877),s=r(216167),a=r(481177);let _=[9,3];var u=r(191),c=r(287434),d=r(30378),g=r(307772),m=r(705895),h=r(839372),p=r(953565);function E(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let f=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}},v=null,w=(0,u.ZP)();class T{constructor(e){E(this,"_logTimeoutLong",null),E(this,"_logTimeoutShort",null),E(this,"_clickthroughStartEvent",null),E(this,"_utcDate",new Date),E(this,"_shortFlushTimoutExperimentEnabled",!1),this._shortFlushTimoutExperimentEnabled=e.shortFlushTimoutExperimentEnabled;let t=e=>{let{activeElement:t}=document;if(t&&t.id===a.Z.VIDEO_IFRAME_ID&&t){setTimeout(()=>t.blur(),0);return}d.Z.pause(g.LU),this.flushEvents(e)},r=f(()=>t(!0));window.addEventListener("beforeunload",r),window.addEventListener("pagehide",r),window.addEventListener("focus",()=>{d.Z.resume(g.LU)}),window.addEventListener("blur",()=>t(!1))}setTimeoutToFlushEvents(e){let t=e.event_type;if(_.includes(e.view_type)&&!this._logTimeoutShort&&13===t)this._logTimeoutShort=setTimeout(this.flushEvents.bind(this,!1,!0),300);else if(!this._logTimeoutLong){let e=this._shortFlushTimoutExperimentEnabled?300:1e4;this._logTimeoutLong=setTimeout(this.flushEvents.bind(this),e)}}addEvent(e,t){let r=e.event_type;if(null==r||!(0,u.cA)(e))return;this.setTimeoutToFlushEvents(e);let n=(0,u.li)(e,t);n.appState=m.Z.getAppState();let o=u.Ch[r];if(o){if(o.startsWith("storyImpression")){n.event_data?.storyImpressions&&(n.event_data.storyImpression=n.event_data.storyImpressions,delete n.event_data.storyImpressions),w.logImpression((0,u.a)(n,"storyImpression"));return}(0,u.nc)(n,o).forEach(w.logImpression);return}(0,p.nP)("webapp.contextLogger.impressionType",{sampleRate:.01,tags:{event_type:r}}),w.logContextEvent(n),12===r&&(w.logContextEvent({...n,event_type:7946}),this._clickthroughStartEvent={...n,time:1e6*Date.now()},v?.storeClickthroughProperties({view_type:n.view_type,view_parameter:n.view_parameter,component:n.component,element:n.element,object_id_str:n.object_id_str,view_data:n.view_data,aux_data:n.aux_data,clientTrackingParams:n.clientTrackingParams}))}flushEvents(e){let t=w.getContextEvents?.();t&&t.length&&w.flushContextEvents(e),this._reset()}_reset(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}_resetShortTimerEvents(){w.resetEventsBuffer?.(),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=null}_resetLongTimerEvents(){w.resetEventsBuffer?.(),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=null}}var b=r(14890),y=r(25919),A=r(957753),P=r(839391),x=r(785893);function S({children:e}){let[t,r]=(0,n.useReducer)((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,mountedPlacements:{...e.mountedPlacements,[t.payload]:!0}};if("UNMOUNT_PLACEMENT"===t.type){let r={...e};return delete r.mountedPlacements[t.payload],delete r.registerdAfterActionPlacements[t.payload],r}return"REGISTER_AFTER_ACTION_PLACEMENT"===t.type?{...e,registerdAfterActionPlacements:{...e.registerdAfterActionPlacements,[t.payload]:!0}}:e},{mountedPlacements:{},registerdAfterActionPlacements:{}}),{mountedPlacements:i,registerdAfterActionPlacements:l}=t,s=(0,o.I0)(),a=(0,o.v9)(e=>e.experiences),_=(0,y.be)(),u=(0,y.Am)(),c=(0,y.Ig)(),d=(0,n.useMemo)(()=>{let e=(0,b.bindActionCreators)({completeExperience:_,dismissExperience:u,fetchAllExperiences:y.fO,fetchAllExperiencesMulti:A.NW,fetchExperienceForPlacements:y.pz,mountPlacement:y.N,triggerExperimentsForPlacement:y.kd,viewExperience:c},s);return{...e,mountPlacement:(t,...n)=>{e.mountPlacement(t,...n),r({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{r({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{r({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})}}},[_,u,s,r,c]),g=(0,n.useMemo)(()=>({experiences:a,mountedPlacements:i,registerdAfterActionPlacements:l,...d}),[a,i,l,d]);return(0,x.jsx)(P.L,{value:g,children:e})}var C=r(340523),k=r(5859),N=r(288240),I=r(569372),L=r(827625),Z=r(197036),R=r(28449),O=r(494125);function U({children:e}){let t=(0,l.v)(),r=(0,h.w)({contextLogger:t});return(0,O.Z)(()=>{document.hasFocus()&&r.registerApp(),r.addEventListeners()}),(0,x.jsx)(R.$,{value:r,children:e})}var M=r(149722),D=r(865235),j=r(468344),F=r(761203),H=r(19447),B=r(386008);function z({children:e}){let t=(0,B.kW)(),r=Object.keys(t).find(e=>void 0!==t[e].login_state),o=r?t[r]:void 0,i=(0,n.useMemo)(()=>(0,D.Z)(o),[o]),l=(0,k.gf)(),{isAuth:s}=i,{isAuthenticated:a}=(0,k.B)();return(0,n.useEffect)(()=>{a!==s&&l({isAuthenticated:s})},[a,s]),(0,x.jsx)(M.$,{value:i,children:e})}function $({children:e}){let t=(0,C.F)(),r=(0,H.AF)(),o=(0,n.useRef)(e=>r[e]);(0,n.useEffect)(()=>{o.current=e=>r[e]},[r]);let i=(0,n.useMemo)(()=>(function({getReduxPin:e,shortFlushTimoutExperimentEnabled:t=!1}){let r=new T({shortFlushTimoutExperimentEnabled:t});window.addEventListener&&window.addEventListener("focus",()=>{if(r._clickthroughStartEvent){let e=r._clickthroughStartEvent;r._clickthroughStartEvent=null;let t={...e,event_type:4100,duration_ns:(0,c.Z)()-e.time};r.addEvent(t)}});let n=t=>{try{let r=t?e(t):void 0;return r?`${r.tracking_params??""}~0`:void 0}catch{return}},o={flushContextEvents:e=>r.flushEvents(e),logContextEvent:e=>{if(null===e.event_type||void 0===e.event_type)return;let t=e.clientTrackingParams||n(e.object_id_str);r.addEvent({...e,clientTrackingParams:t},o.injectSetViewContextDataFromHook)},logImpression:({auxData:e,component:t,eventData:n,eventType:i,impressionType:l,objectIdStr:s,viewData:a,viewParameter:_,viewType:u})=>{null!=i&&r.addEvent({event_type:i,event_data:{[l]:n},component:t,object_id_str:s,aux_data:e,view_type:u,view_parameter:_,view_data:a},o.injectSetViewContextDataFromHook)}};return v=(0,h.w)({contextLogger:o}),s.Z.contextLogger=o,o})({getReduxPin:e=>o.current(e),shortFlushTimoutExperimentEnabled:t.checkExperiment("web_context_logs_long_flush_timeout").anyEnabled}),[t]);return(0,x.jsx)(l.B,{value:i,children:e})}function W(e){let{children:t,reduxStore:r,serverState:l,...a}=e,_=(0,n.useRef)(!1),u=(0,i.Z)(),c=e.requestContext.isAuthenticated,d=e.requestContext.experimentsClient.checkExperiment("web_use_fetched_resource_hook").anyEnabled,g=e.requestContext.experimentsClient.checkExperiment(c?"web_fetched_resource_on_page_handlers_auth":"web_fetched_resource_on_page_handlers_unauth").anyEnabled,m=u||d||g;return m&&!_.current&&(function(e){if(!window)return;let t={},r=(e,r)=>{let n=decodeURIComponent(r),o=new Promise(r=>{t[e]||(t[e]={}),t[e][n]=r});I.Z.add(e,n,o)},n=r=>{let n=JSON.parse(r),{normalizedResponse:o,options:i,resource:l,response:a,schema:_}=(0,Z.Z)(n);s.Z.fetchCompleteCallback&&s.Z.fetchCompleteCallback({resource:l,options:i,response:a,normalizedResponse:o,refresh:!1,resourceSchema:_}),e.dispatch((0,L.Sr)(l,i,a,o,!1,_)),t[l]?.[N.Z(i)]?.()};window.__PWS_RESOURCE_PENDING_FETCH_HANDLER__=r,window.__PWS_RESOURCE_SSR_HANDLER__=n;let o=Object.keys(window.__PWS_RESOURCE_PENDING_BEFORE_INIT__);o.length&&(o.forEach(e=>{window.__PWS_RESOURCE_PENDING_BEFORE_INIT__[e].forEach(t=>{r(e,t)})}),window.__PWS_RESOURCE_PENDING_BEFORE_INIT__={}),window.__PWS_RESOURCE_DATA_BEFORE_INIT__.length&&(window.__PWS_RESOURCE_DATA_BEFORE_INIT__.forEach(n),window.__PWS_RESOURCE_DATA_BEFORE_INIT__=[])}(r),_.current=!0),(0,x.jsx)(j.Z,{...a,children:(0,x.jsx)(o.zt,{serverState:m?void 0:l,store:r,children:(0,x.jsx)(F.fJ,{children:(0,x.jsx)(H._S,{children:(0,x.jsx)(B.kY,{children:(0,x.jsx)(z,{children:(0,x.jsx)($,{children:(0,x.jsx)(S,{children:(0,x.jsx)(U,{children:t})})})})})})})})})}},497617:(e,t,r)=>{r.d(t,{Z:()=>R});var n=r(667294),o=r(216167),i=r(224796),l=r(324358),s=r(587703),a=r(658583),_=r(622541),u=r(165736),c=r(140017),d=r(769666),g=r(916963),m=r(96452),h=r(467707),p=r(321725),E=r(340523),f=r(182962),v=r(891276),w=r(5859),T=r(890833),b=r(731714),y=r(191313),A=r(217058),P=r(722363),x=r(624797),S=r(623891),C=r(926234),k=r(67661),N=r(953565);let I=0,L=()=>{let e={};return[i.qo,i.Y9,i.E9].forEach(t=>{let r=b.Z.getItem(t);r&&(e[t]=r)}),JSON.stringify(e)},Z=()=>{let e=document.referrer;return e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"};function R(){let e=(0,c.ZP)(),t=(0,f.Z)(),r=(0,s.Z)(),R=(0,w.B)(),O=(0,P.Z)(),{checkExperiment:U}=(0,E.F)();return(0,n.useCallback)((n,{inviteCode:s,loggingOptions:{signupContext:c,signupAttemptContextEvent:E}})=>{let f=e=>{r({...E,event_type:e,aux_data:{...E.aux_data,upsell_reason:E.aux_data?.upsell_reason||b.Z.getItem(i.bg)||null,upsell_view_count:b.Z.getItem(i.w0)||0}}),7487===e&&b.Z.setItem(i.w0,0)},w=({isRetrying:t})=>{let E={...n},P=h.Z.includes(R.origin),M=(0,k.t_)(),D=(0,C.O)(),j=window?.location?.search??null,F=(0,x.mB)(j).utm_campaign;M&&(E={...E,visited_pages:M}),D&&(E={...E,referrer:D}),F&&(E={...E,utm_campaign:F});let H=b.Z.getItem(i.e9);if(M)E={...E,visited_pages:M};else if(H){let e=[];for(let t of H)t.is_shared_pin&&e.push({ts:t.ts,path:t.path,first_pin_image_signature:t.image_signature,is_shared:!0});e&&(E={...E,visited_pages:JSON.stringify(e.concat(M||[]))})}let B=(0,g.Z)({checkExperiment:U});B.length>0&&(E={...E,privacy_disclaimer_acknowledge:B}),E={...E,user_behavior_data:L()};let z=(0,p.yV)(E);t||(f(7537),O({action:"signup",event:"attempt",trigger:c?.trigger,type:z}));let $=()=>{let{country:e,countryFromHostName:t,countryFromIp:n,regionFromIp:o}=R;(0,T.Z)("signup"),a.zN(_.Mq.name),a.zN(_.x2.name),(0,l.Z)(),a.t8(_.Xh,"1"),(0,d.Z)(),(0,y.L_)(i._b);let s=c?.container||"container_unknown";(0,A.My)(`signup.container.${s}`);let u=c?.signupSource||"signupSource_unknown";(0,A.My)(`signup.source.${u}`),r({event_type:"home_page"===s?1750:1754}),(0,A.My)(`signup_referrer_module.${String((0,S.Z)().referrer||"unknown")}`),(0,v.ko)({country:e,countryFromHostName:t,countryFromIp:n,regionFromIp:o,deviceType:"Desktop",eventCategory:"NewUsers"}),f(7487),O({action:"signup",event:"success",referrer:Z(),trigger:c?.trigger,type:z})},W=e=>{if(e.api_error_code===m.tz&&((0,A.My)("multi_step_set_age_restrict_cookie"),a.t8(_.It,"1",(0,a.kZ)(_.It))),(!e.api_error_code||[m.dO,m.cZ].includes(e.api_error_code))&&I<3)return(0,A.My)(`unauth_web.signup_retry_error.${String(e.api_error_code)}.${String(c?.container)}`),I+=1,w({isRetrying:!0});throw f(7488),O({action:"signup",event:"fail",trigger:c?.trigger,type:z}),e};if(!E.facebook_id&&!E.google_open_id_token&&!E.line_id_token&&E.email&&P){(0,A.My)("unauth_cross_domain_register_debugging_counter");let t=e=>{(0,A.My)(`web_cross_domain_register.${e}.${z}`)};t("attempt");let r={facebookToken:R.facebookToken,inviteCode:s,locale:R.locale,referrer:R.referrerFromCookie,unauthId:R.unauthId};return(0,u.a$)(E,r).then(r=>{$();let n=r.data||"";if(n)return t("success_with_token"),(0,u.kv)(n,!0).then(()=>{t("success_token_exchanged")},e=>{throw t("success_token_not_exchanged"),e});throw t("success_without_token"),Error(e.bt("We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue.", "We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue.", " - ", undefined, true))},e=>{t("failure"),W(e)})}return(0,N.nP)("webapp.debug_signup_type.core_register",{sampleRate:1,tags:{CHECK_TYPE:(0,p.Eh)(E,"CHECK_TYPE")??"none",CHECK_EXISTS:(0,p.Eh)(E,"DEPRECATED_CHECK_EXISTS"),CHECK_TRUTHY:(0,p.Eh)(E,"DEPRECATED_CHECK_TRUTHY")}}),o.Z.create("UserRegisterResource",E).callCreate().then(()=>$(),e=>W(e))};return t(),w({isRetrying:!1})},[U,t,e,r,R,O])}},633005:(e,t,r)=>{r.d(t,{Z:()=>n});function n(e){let t=e.userAgent.isMobile?"mobile":"desktop";return`${t}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}},761203:(e,t,r)=>{r.d(t,{bn:()=>s,fJ:()=>_,gC:()=>a});var n=r(545007),o=r(342513),i=r(785893);let{Provider:l,useHook:s}=(0,o.Z)("Boards");function a(){let e=s();return t=>e[t]}function _({children:e}){let t=(0,n.v9)(({boards:e})=>e,n.wU);return(0,i.jsx)(l,{value:t,children:e})}},735728:(e,t,r)=>{r.d(t,{N4:()=>i,Wh:()=>n,hr:()=>o});let n=e=>e.bt("Log in to continue", "Log in to continue", "limitedLogin.modalHeader.default", undefined, true),o=e=>e.bt("You're almost there! Log in to access all of Pinterest", "You're almost there! Log in to access all of Pinterest", "loginModal.limitedLogin.subheader", undefined, true),i=({i18n:e,toFollow:t})=>t?e.bt("Log in to follow", "Log in to follow", "limitedLogin.modalHeader.follow", undefined, true):e.bt("Log in to unfollow", "Log in to unfollow", "limitedLogin.modalHeader.unfollow", undefined, true)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/67868.en_GB-603c83a03c5b4eca.mjs.map